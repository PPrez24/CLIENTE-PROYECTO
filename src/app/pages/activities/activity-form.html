<app-header></app-header>
<main class="activity-form">
  <div class="form-container">
    <h2 class="form-title">
      {{ isEdit ? 'Editar actividad' : 'Nueva actividad' }}
    </h2>

    <form [formGroup]="activityForm" (ngSubmit)="save()">
      <div class="form-group">
        <label>Título</label>
        <input formControlName="title" [class.invalid]="title?.invalid && title?.touched" />
        <small class="error-message" *ngIf="title?.invalid && title?.touched">
          <span *ngIf="title?.hasError('required')">El título es requerido</span>
          <span *ngIf="title?.hasError('minlength')">Mínimo 3 caracteres</span>
        </small>
      </div>

      <div class="form-group">
        <label>Tipo</label>
        <select formControlName="type">
          <option>Académico</option>
          <option>Deportivo</option>
          <option>Cultural</option>
          <option>Voluntariado</option>
        </select>
      </div>

      <div class="row">
        <div class="form-group">
          <label>Fecha</label>
          <input type="date" formControlName="date" [class.invalid]="date?.invalid && date?.touched" />
          <small class="error-message" *ngIf="date?.invalid && date?.touched">
            <span *ngIf="date?.hasError('required')">La fecha es requerida</span>
            <span *ngIf="date?.hasError('pastDate')">La fecha no puede ser pasada</span>
          </small>
        </div>
        <div class="form-group">
          <label>Hora</label>
          <input type="time" formControlName="time" />
        </div>
      </div>

      <div class="form-group">
        <label>Ubicación</label>
        <input formControlName="location" [class.invalid]="location?.invalid && location?.touched" />
        <small class="error-message" *ngIf="location?.invalid && location?.touched">
          <span *ngIf="location?.hasError('required')">La ubicación es requerida</span>
        </small>
      </div>

      <div class="form-group">
        <label>Estatus</label>
        <select formControlName="status">
          <option>pendiente</option>
          <option>completada</option>
        </select>
      </div>

      <div class="form-actions">
        <button class="btn btn-primary" type="submit" [disabled]="activityForm.invalid">
          {{ isEdit ? 'Guardar cambios' : 'Guardar' }}
        </button>
        <button class="btn btn-secondary" type="button" (click)="cancel()">
          Cancelar
        </button>
      </div>
    </form>
  </div>
  <app-toast></app-toast>
</main>
<app-footer></app-footer>
