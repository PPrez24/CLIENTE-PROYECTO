<app-header></app-header>
<main class="auth">
  <h2>Iniciar sesiÃ³n</h2>
  <form [formGroup]="loginForm" (ngSubmit)="login()">
    <label>Email
      <div class="email-input-group">
        <input 
          type="text" 
          formControlName="emailPrefix" 
          placeholder="tu.nombre"
          [class.invalid]="emailPrefix?.invalid && emailPrefix?.touched"
        />
        <span class="email-suffix">@iteso.mx</span>
      </div>
      <small class="error-message" *ngIf="emailPrefix?.invalid && emailPrefix?.touched">
        <span *ngIf="emailPrefix?.hasError('required')">El email es requerido</span>
        <span *ngIf="emailPrefix?.hasError('pattern')">Formato de email invÃ¡lido</span>
      </small>
    </label>
    <label>ContraseÃ±a
      <div class="password-container">
        <input 
          [type]="showPassword ? 'text' : 'password'" 
          formControlName="password"
          [class.invalid]="password?.invalid && password?.touched"
        />
        <button type="button" (click)="togglePassword()" class="toggle-password">
          {{ showPassword ? 'ğŸ™ˆ' : 'ğŸ‘ï¸' }}
        </button>
      </div>
      <small class="error-message" *ngIf="password?.invalid && password?.touched">
        <span *ngIf="password?.hasError('required')">La contraseÃ±a es requerida</span>
        <span *ngIf="password?.hasError('minlength')">MÃ­nimo 6 caracteres</span>
      </small>
    </label>
    <button class="btn" type="submit" [disabled]="loginForm.invalid || loading">
      <span *ngIf="!loading">Entrar</span>
      <span *ngIf="loading" class="spinner"></span>
    </button>
  </form>
  <p class="error" *ngIf="error">{{ error }}</p>
  
  <p class="register-section">Â¿No tienes cuenta? <a routerLink="/auth/register" class="register-btn">RegÃ­strate</a></p>
</main>
<app-footer></app-footer>
